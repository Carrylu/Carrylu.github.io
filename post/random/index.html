<!doctype html>
<html lang="en-us">
  <head>
    <title>随机存取文件流 // My New Hugo Site</title>
    <meta charset="utf-8" />
    <meta name="generator" content="Hugo 0.55.6" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="author" content="John Doe" />
    <meta name="description" content="" />
    <link rel="stylesheet" href="https://Carrylu.github.io/css/main.min.f90f5edd436ec7b74ad05479a05705770306911f721193e7845948fb07fe1335.css" />

    
    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="随机存取文件流"/>
<meta name="twitter:description" content="1.随机存取文件流：RandomAccessFile 2.使用说明：  1.RandomAccessFile直接继承于java.lang.Object类，实现了DataInput和DataOutput接口 2.RandomAccessFile既可以作为一个输入流，又可以作为一个输出流
 3.如果RandomAccessFile作为输出流时，写出到的文件如果不存在，则在执行过程中自动创建。
 如果写出到的文件存在，则会对原文件内容进行覆盖。（默认情况下，从头覆盖）
  可以通过相关的操作，实现RandomAccessFile“插入”数据的效果。seek(int pos)   3.典型代码1： @Test public void test1() { RandomAccessFile raf1 = null; RandomAccessFile raf2 = null; try { //1. raf1 = new RandomAccessFile(new File(&quot;爱情与友情.jpg&quot;),&quot;r&quot;); raf2 = new RandomAccessFile(new File(&quot;爱情与友情1.jpg&quot;),&quot;rw&quot;); //2. byte[] buffer = new byte[1024]; int len; while((len = raf1.read(buffer)) != -1){ raf2.write(buffer,0,len); } } catch (IOException e) { e.printStackTrace(); } finally { //3. if(raf1 != null){ try { raf1."/>

    <meta property="og:title" content="随机存取文件流" />
<meta property="og:description" content="1.随机存取文件流：RandomAccessFile 2.使用说明：  1.RandomAccessFile直接继承于java.lang.Object类，实现了DataInput和DataOutput接口 2.RandomAccessFile既可以作为一个输入流，又可以作为一个输出流
 3.如果RandomAccessFile作为输出流时，写出到的文件如果不存在，则在执行过程中自动创建。
 如果写出到的文件存在，则会对原文件内容进行覆盖。（默认情况下，从头覆盖）
  可以通过相关的操作，实现RandomAccessFile“插入”数据的效果。seek(int pos)   3.典型代码1： @Test public void test1() { RandomAccessFile raf1 = null; RandomAccessFile raf2 = null; try { //1. raf1 = new RandomAccessFile(new File(&quot;爱情与友情.jpg&quot;),&quot;r&quot;); raf2 = new RandomAccessFile(new File(&quot;爱情与友情1.jpg&quot;),&quot;rw&quot;); //2. byte[] buffer = new byte[1024]; int len; while((len = raf1.read(buffer)) != -1){ raf2.write(buffer,0,len); } } catch (IOException e) { e.printStackTrace(); } finally { //3. if(raf1 != null){ try { raf1." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://Carrylu.github.io/post/random/" />
<meta property="article:published_time" content="2019-07-18T23:02:27&#43;08:00"/>
<meta property="article:modified_time" content="2019-07-18T23:02:27&#43;08:00"/>


  </head>
  <body>
    <header class="app-header">
      <a href="https://Carrylu.github.io/"><img class="app-header-avatar" src="/avatar.jpg" alt="John Doe" /></a>
      <h1>My New Hugo Site</h1>
      <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc vehicula turpis sit amet elit pretium.</p>
      <div class="app-header-social">
        
      </div>
    </header>
    <main class="app-container">
      
  <article class="post">
    <header class="post-header">
      <h1 class ="post-title">随机存取文件流</h1>
      <div class="post-meta">
        <div>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-calendar">
  <title>calendar</title>
  <rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line>
</svg>
          Jul 18, 2019
        </div>
        <div>
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-clock">
  <title>clock</title>
  <circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline>
</svg>
          1 min read
        </div></div>
    </header>
    <div class="post-content">
      

<h1 id="1-随机存取文件流-randomaccessfile">1.随机存取文件流：RandomAccessFile</h1>

<h1 id="2-使用说明">2.使用说明：</h1>

<ul>
<li>1.RandomAccessFile直接继承于java.lang.Object类，实现了DataInput和DataOutput接口</li>

<li><p>2.RandomAccessFile既可以作为一个输入流，又可以作为一个输出流</p></li>

<li><p>3.如果RandomAccessFile作为输出流时，写出到的文件如果不存在，则在执行过程中自动创建。</p></li>

<li><p>如果写出到的文件存在，则会对原文件内容进行覆盖。（默认情况下，从头覆盖）</p></li>

<li><ol>
<li>可以通过相关的操作，实现RandomAccessFile“插入”数据的效果。seek(int pos)</li>
</ol></li>
</ul>

<h1 id="3-典型代码1">3.典型代码1：</h1>

<pre><code class="language-java">@Test
public void test1() {

    RandomAccessFile raf1 = null;
    RandomAccessFile raf2 = null;
    try {
        //1.
        raf1 = new RandomAccessFile(new File(&quot;爱情与友情.jpg&quot;),&quot;r&quot;);
        raf2 = new RandomAccessFile(new File(&quot;爱情与友情1.jpg&quot;),&quot;rw&quot;);
        //2.
        byte[] buffer = new byte[1024];
        int len;
        while((len = raf1.read(buffer)) != -1){
            raf2.write(buffer,0,len);
        }
    } catch (IOException e) {
        e.printStackTrace();
    } finally {
        //3.
        if(raf1 != null){
            try {
                raf1.close();
            } catch (IOException e) {
                e.printStackTrace();
            }

        }
        if(raf2 != null){
            try {
                raf2.close();
            } catch (IOException e) {
                e.printStackTrace();
            }

        }
    }
}
</code></pre>

<h1 id="4-典型代码2">4.典型代码2：</h1>

<pre><code class="language-java">/*
使用RandomAccessFile实现数据的插入效果
 */
@Test
public void test3() throws IOException {

    RandomAccessFile raf1 = new RandomAccessFile(&quot;hello.txt&quot;,&quot;rw&quot;);

    raf1.seek(3);//将指针调到角标为3的位置
    //保存指针3后面的所数据到StringBuilder中
    StringBuilder builder = new StringBuilder((int) new File(&quot;hello.txt&quot;).length());
    byte[] buffer = new byte[20];
    int len;
    while((len = raf1.read(buffer)) != -1){
        builder.append(new String(buffer,0,len)) ;
    }
    //调回指针，写入“xyz”
    raf1.seek(3);
    raf1.write(&quot;xyz&quot;.getBytes());

    //将StringBuilder中的数据写入到文件中
    raf1.write(builder.toString().getBytes());

    raf1.close();

    //思考：将StringBuilder替换为ByteArrayOutputStream
}
</code></pre>

    </div>
    <div class="post-footer">
      
    </div>
  </article>

    </main>
  </body>
</html>
